<div id="flashcards" class="greek tab-pane" role="tabpanel">
  <div class="flashcard-chapters">
    <div class="flashcard-chapter">
      <select id="chapter-start" class="form-control">
      {% for ch in chapters %}
        <option value="{{ch}}">
          Chapter {{ch}}
        </option>
      {% endfor %}
      </select>
    </div>
    <div class="text-center flashcard-chapter-text">
      to
    </div>
    <div class="flashcard-chapter">
      <select id="chapter-end" class="form-control" >
      {% for ch in chapters %}
        <option value="{{ch}}">
          Chapter {{ch}}
        </option>
      {% endfor %}
      </select>
    </div>
  </div>
  <div class="flashcard-container">
    <div id="flashcard" class="flashcard-card">
      <div class="flashcard-text">
        example
      </div>
    </div>
    <div class="flashcard-number">
      1/{{greekVocab.count}}
    </div>
  </div>
</div>

<script type="text/javascript">
  let isFront = true;
  let greekVocab_json = "{{greekVocab_json}}";
  let startingChapter = 1;
  let endingChapter = 1;
  console.log(greekVocab_json);

  function changeStartingChapter() {
    startingChapter = document.getElementById("chapter-start").value;
    console.log("Starting chapter:", startingChapter);

    // if the new starting chapter is greater than the ending chapter,
    // do not update greek vocabs
    if (startingChapter > endingChapter) {
      return;
    }

    // TODO: Add ajex to update vocab list
  }

  function changeEndingChapter() {
    endingChapter = document.getElementById("chapter-end").value;
    console.log("Ending chapter:", endingChapter);

    // if the new ending chapter is smaller than the starting chapter,
    // do not update greek vocabs
    if (endingChapter < startingChapter ) {
      return;
    }

    // TODO: Add ajex to update vocab list
  }

  // A function to shuffle a random permutation of arr[]
  // Input:
  //   arr - an array of vocab
  //   n - the length of array
  // Output:
  //   arr - an array of randomized vocab
  function shuffleCards(arr, n) {
    /*
      Fisher-Yates shuffle Algorithm:
      To shuffle an array a of n elements (indices 0..n-1):
        for i from n - 1 downto 1 do
          j = random integer with 0 <= j <= i
          exchange a[j] and a[i]
      */
    let newArr = arr;
    for (let i = n - 1; i > 0; i--) {
      // A random number between min and max (both included)
      // Math.floor(Math.random() * (max - min + 1) ) + min
      let j = Math.floor(Math.random() * (i + 1))

      let temp = newArr[j];
      newArr[j] = newArr[i];
      newArr[i] = temp;
    }
    return newArr;
  }

  function flipCard() {
    isFront = !isFront;
    if (isFront) {
      $("#flashcard").css("background-color", "#eee");
    } else {
      $("#flashcard").css("background-color", "#fff");
    }
  }

  function showNextCard() {
    // TODO: Change to next flashcard

    // update the current index of the card
  }

  $(document).ready(function() {
    $("#chapter-start").on('change', changeStartingChapter);
    $("#chapter-end").on('change', changeEndingChapter);
    $("#flashcard").click(flipCard);
  });
</script>
